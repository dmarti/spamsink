.\" Copyright (c) 2003, 2004 Marc Balmer <marc@msys.ch>.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd April 11, 2003
.Dt SMTPSEND 8
.Os
.Sh NAME
.Nm smtpsend
.Nd SMTP message generator and benchmarking tool
.Sh SYNOPSIS
.Nm smtpsend
.Op Fl v
.Op Fl p Ar port

.Sh DESCRIPTION
.Nm
is used to measure the performance of SMTP MTAs.  It generates e-mail messages of a user defined size (or 1024 bytes per default) and delivers them via SMTP to a MTA.

.Nm
can either generate as many messages as possible over a certain amount of time or deliver a specified number of messages.  In either case
.Nm
will measure the time elapsed and the number of messages delivered.  After the program run it will output the time elapsed, the number of messages delivered, the average number of messages delivered per minute and per second as well as the average delivery time per message.

.Nm
forks one or more parallel senders each using one or more
sequential connections to a SMTP server to deliver one or more
messages per connection. 
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl s
Maxmimum number of parallel senders.
.It Fl m
Number of messages to send per connection.
.It Fl b
Size of messages in bytes.
.It Fl m
Number of messages to send per connection.
.It Fl n
Send at least n messages (the total number of messages sent may be different because a sender always sends all of its messages).
.It Fl t
Total time to run (this option can not be used together with -n).
.It Fl p
Specify port to listen on
.It Fl F
Specify address to use as the senders address (both in the envelope and the message header).
.It Fl T
Specify the recipients address.
.It Fl S
Subject of the generated messages.
.It Fl v
Increase the level of verbosity.  Use once to display SMTP traffic without DATA phase on stdout, use twice to include DATA phase int he output.
.El

.Sh BUGS
The exit status of a forked sender is not checked. The result will not be reliable if one or more senders aborts due to an error.  This behaviour will eventually be changed.

.Sh AUTHORS
.An Marc Balmer Aq marc@msys.ch

.Sh SEE ALSO
.Xr smtpsink 8
